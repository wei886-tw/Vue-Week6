import{_ as u,o as r,c as l,a as t,n as p,e as h,F as _,r as m,t as c,f,g as $}from"./index-CJXK5sQV.js";const k={data(){return{}},props:["pagination","getPageProducts"],methods:{},mounted(){}},v={class:"container d-flex justify-content-center my-5"},P={"aria-label":"Page navigation example "},x={class:"pagination"},b={class:"page-item"},y=t("span",{"aria-hidden":"true"},"«",-1),C=[y],L=["onClick"],w={class:"page-item"},B=t("span",{"aria-hidden":"true"},"»",-1),N=[B];function z(o,n,e,i,d,g){return r(),l("div",v,[t("nav",P,[t("ul",x,[t("li",b,[t("a",{class:p(["page-link",{disabled:!e.pagination.has_pre}]),href:"#","aria-label":"Previous",onClick:n[0]||(n[0]=h(s=>e.getPageProducts(e.pagination.current_page-1),["prevent"]))},C,2)]),(r(!0),l(_,null,m(e.pagination.total_pages,(s,a)=>(r(),l("li",{class:p(["page-item",{active:e.pagination.current_page===s}]),key:a},[t("a",{class:"page-link",href:"#",onClick:h(q=>e.getPageProducts(s),["prevent"])},c(s),9,L)],2))),128)),t("li",w,[t("a",{class:p(["page-link",{disabled:!e.pagination.has_next}]),href:"#","aria-label":"Next",onClick:n[1]||(n[1]=h(s=>e.getPageProducts(e.pagination.current_page+1),["prevent"]))},N,2)])])])])}const A=u(k,[["render",z]]),F={data(){return{products:[],pagination:{}}},components:{pagination:A},methods:{getPageProducts(o){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/wei123/admin/products?page=${o}`).then(i=>{this.products=i.data.products,this.pagination=i.data.pagination,console.log(this.pagination)}).catch(i=>{alert(i)})},checkLogin(){const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");o?(this.$http.defaults.headers.common.Authorization=o,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/user/check").then(()=>{}).catch(e=>{alert(e.response.data.message)})):(alert("您尚未登入。"),this.$router.push("/adminLogin"))}},mounted(){this.checkLogin(),this.getPageProducts()}},V={class:"container"},j={class:"row"},D={class:"col-12"},E=t("h1",{class:"text-center my-3"},"後台產品列表",-1),M={class:"table"},S=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"分類"),t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用")])],-1);function T(o,n,e,i,d,g){const s=f("pagination");return r(),l("div",V,[t("div",j,[t("div",D,[E,t("table",M,[S,t("tbody",null,[(r(!0),l(_,null,m(d.products,a=>(r(),l("tr",{key:a.id},[t("td",null,c(a.category),1),t("td",null,c(a.title),1),t("td",null,c(a.origin_price),1),t("td",null,c(a.price),1),t("td",null,c(a.is_enabled?"是":"否"),1)]))),128))])]),$(s,{pagination:d.pagination,"get-page-products":g.getPageProducts},null,8,["pagination","get-page-products"])])])])}const H=u(F,[["render",T]]);export{H as default};
